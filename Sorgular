SELECT
    s.SATIS_ID,
    c.AD AS CALISAN_ADI,
    c.SOYAD AS CALISAN_SOYADI,
    m.AD AS MUSTERI_ADI,
    m.SOYAD AS MUSTERI_SOYADI,
    a.VIN,
    s.NIHAI_SATIS_FIYATI
FROM
    SATISLAR s
JOIN CALISANLAR c ON s.CALISAN_ID = c.CALISAN_ID
JOIN MUSTERILER m ON s.MUSTERI_ID = m.MUSTERI_ID
JOIN ARACLAR a ON s.ARAC_ID = a.ARAC_ID;

SELECT
    s.SUBE_AD,
    COUNT(t.SATIS_ID) AS "TOPLAM SATIŞ ADEDİ",
    SUM(t.NIHAI_SATIS_FIYATI) AS "TOPLAM CİRO"
FROM
    SATISLAR t
JOIN SUBELER s ON t.SUBE_ID = s.SUBE_ID
GROUP BY
    s.SUBE_AD;

SELECT
    m.AD || ' ' || m.SOYAD AS "MÜŞTERİ ADI",
    t.TAKSIT_SIRA_NO,
    t.ODENMESI_GEREKEN_TARIH,
    t.DURUM,
    t.ODENEN_TUTAR
FROM
    TAKSIT_ODEMELERI t
JOIN SATISLAR s ON t.SATIS_ID = s.SATIS_ID
JOIN MUSTERILER m ON s.MUSTERI_ID = m.MUSTERI_ID;

SELECT
    mt.MARKA_AD,
    t.MODEL_AD,
    COUNT(a.ARAC_ID) AS "STOK MIKTARI"
FROM
    ARACLAR a
JOIN MODEL_TANIMLARI t ON a.MODEL_ID = t.MODEL_ID
JOIN MARKA_TANIMLARI mt ON t.MARKA_ID = mt.MARKA_ID
WHERE
    a.DURUM = 'STOKTA'
GROUP BY
    mt.MARKA_AD, t.MODEL_AD
ORDER BY
    mt.MARKA_AD, t.MODEL_AD;

SELECT
    a.VIN,
    mt.MARKA_AD,
    t.MODEL_AD,
    a.DURUM,
    s.SUBE_AD
FROM
    ARACLAR a
JOIN MODEL_TANIMLARI t ON a.MODEL_ID = t.MODEL_ID
JOIN MARKA_TANIMLARI mt ON t.MARKA_ID = mt.MARKA_ID
LEFT JOIN SATISLAR sat ON a.ARAC_ID = sat.ARAC_ID
LEFT JOIN SUBELER s ON sat.SUBE_ID = s.SUBE_ID;

SELECT
    pm.AD,
    pm.SOYAD,
    mt.MARKA_AD,
    t.MODEL_AD,
    pm.KAYNAK
FROM
    POTANSIYEL_MUSTERILER pm
JOIN ARACLAR a ON pm.ILGI_DUYULAN_ARAC_ID = a.ARAC_ID
JOIN MODEL_TANIMLARI t ON a.MODEL_ID = t.MODEL_ID
JOIN MARKA_TANIMLARI mt ON t.MARKA_ID = mt.MARKA_ID;

